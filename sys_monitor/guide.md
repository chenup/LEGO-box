系统环境：ubuntu 16.04 64bit

开发语言：C/C++

题目：

获取当前系统的CPU使用率、内存使用率、进程列表，封装为以下json结构：

{

    CPU：xx，

    Mem: yy,

    Proc:[

        {

        pid:xx,

        ppid:yy,

        name:zz,

        cmd:zz

        },

        {

        pid:xx,

        ppid:yy,

        name:cc,

        cmd:zz

        }

    ],

    Timestamp:ii

}

写入日志文件，信息采集频率可调（可在代码中使用参数实现）



要求：

1.分为两个线程来实现，一个线程获取系统信息，另一个线程写入日志文件。

2.尽量减少文件写入次数。

3.高系统负载、高IO、高采集频率的情况下，尽量减少数据丢失，但不允许增高程序自身负载。



加分项：

可以使用特殊队列缓存。

可控的空间消耗。

可控的资源消耗。